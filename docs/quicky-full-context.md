# quicky – Full Context and Decisions Document

Purpose of This Document

This document is intended to serve as a complete context handoff and grounding prompt for future conversations. It captures the full product vision, technical decisions, architectural reasoning, onboarding flows, scalability assumptions, development setup, and current execution state of the quicky project. Nothing in this document should be interpreted as hypothetical; it reflects explicit decisions made so far and incorporates clarifications and refinements from ongoing implementation work.

## 1. Product Vision and Positioning

The product is a lightweight operations management web and mobile app designed for:
- Small operations teams
- Maintenance teams
- Light industrial or facilities-oriented environments

The product deliberately targets teams that find tools like MaintainX too complex, too slow to onboard, or too feature-heavy for their real-world needs.

### Core Philosophy
- Extremely low-friction onboarding
- Clear task ownership and status visibility
- Simple collaboration around work
- Fast to learn, fast to use

This is not an enterprise CMMS clone and does not attempt to compete on advanced reporting, compliance tooling, or deep asset management.

## 2. Competitive Context

### MaintainX
- Successful, well-funded CMMS
- Strong in asset-heavy, regulated environments
- High complexity and onboarding cost

### Opportunity Identified
Smaller ops teams want:
- Fewer features
- Faster setup
- Clear communication
- Mobile-first usage

The MVP is intentionally scoped to capture this underserved segment.

## 3. Core Data Model and Hierarchy

### Entities
- User
  - Identified by email
  - Default username is automatically derived from the portion of the email before the "@" on signup
  - Can belong to one or more organizations
  - Stores authentication data, including OTP values and OTP expiration timestamps for email-based login
- Organization
  - Represents a company or operational group
  - Contains users, teams, and all operational data
  - Has an owner (the user who created the organization)
- Team
  - Subdivision within an organization
- Task List
  - Belongs to a team
  - Logical grouping of tasks
- Task
  - Belongs to a task list
  - Has an owner
  - Has a status
- Task Message (Chat)
  - Belongs to a task
  - Used for discussion and updates

### Task Status Values
- Requires Attention
- At Risk
- In Progress
- Complete

Each status change can later generate a system message in the task chat.

## 4. Onboarding and Activation Flow

### Authentication
- Email-based signup
- User chooses either:
  - Password authentication, or
  - Email OTP authentication
- No social login for MVP

### OTP Implementation Details
- OTP value is stored on the user record
- OTP has a valid-until timestamp
- OTP is invalidated after use or expiration

### Session Persistence
- Once authenticated, the user session persists across page refreshes
- Refreshing the page must not return the user to the login screen if a valid session exists
- Session handling is implemented via JWT or equivalent token-based auth stored client-side

### First-Time User Flow
- User signs up or logs in
- Immediately shown the Organization Selection Page (this page already exists and is being extended, not replaced)
- This page presents two primary actions:
  - Create an organization
  - Get invited to an organization

### Invite-Aware Behavior
- If the user has a pending invite:
  - The invited organization name appears at the top of the screen
  - The two primary buttons are still shown

### Organization Selection Rules
- If a user creates an organization on this screen:
  - The organization is created in the database immediately
  - The creating user is set as the organization owner
  - The organization appears as a selectable button on the org page
  - Clicking the organization navigates the user to the dashboard page
- If the user joins via invite:
  - Membership is created in the database
  - User is routed to the dashboard
- Once a user selects an organization, this screen should not appear again
- The screen can be accessed later only via an explicit org-switching menu

### Activation Definition (Success Criteria)
An organization is considered successfully activated if:
- It reaches at least 3 users, and
- The number of tasks created in the first week is greater than or equal to the number of users in the organization

## 5. Invite System Design

### Invite Entry Points
- On the Org Selection Page, users who do not create an org can choose "Get invited"
- Clicking "Get invited" shows an explanation screen stating:
  - An organization admin can share an invite link, or
  - An organization admin can invite the user’s email address directly inside the app

### Invite Links
- Generated by organization members
- Can be shared via text or email

### Invite Behavior
- One-time use
- Time-limited (recommended default: 14 days)
- On acceptance:
  - User becomes a member of the organization
  - Invite is invalidated

This approach balances usability with security and avoids long-lived access tokens.

## 6. MVP Feature Scope

### Included in MVP
- Authentication
- Organization creation and membership
- Team creation
- Task lists
- Tasks with status
- Task chat (text only)
- Invite flow (link-based and email-based)
- Basic activation metrics

### Explicitly Excluded from MVP
- AI features
- Recurring tasks
- File uploads
- Asset tracking
- Advanced analytics
- Offline-first guarantees
- Complex role-based permissions

## 7. Core Application UI Structure

### Dashboard Page (New Page)
A new unified dashboard page will be created (this is not an update to an existing page).

On desktop/tablet: The following views are displayed as adjacent vertical columns on a single page:
- Teams
- Task Lists
- Tasks
- Task Chat

### Column Behavior
- The column last clicked by the user becomes:
  - Visually highlighted
  - Wider than the other columns
- Other columns shrink proportionally
- The currently selected team determines which task lists are shown
- The currently selected task list determines which tasks are shown
- The currently selected task determines which chat is shown

### Mobile Behavior
- Only one column/view is visible at a time
- Top navigation includes back and forward arrows
- Arrows allow horizontal navigation between Teams, Task Lists, Tasks, and Chat
- State is preserved as the user navigates between columns

## 8. Monetization Direction

While not implemented yet, the intended monetization model is:
- SaaS pricing per organization
- Free tier with strict limits (users or tasks)
- Paid tiers unlock:
  - More users
  - More tasks
  - Notifications
  - Integrations

Pricing is aligned with operational value, not enterprise procurement complexity.

## 9. Technical Architecture Overview

### Frontend
- React + TypeScript
- Built with Vite (not Create React App)
- Rolldown-vite explicitly declined due to experimental status
- Frontend runs at http://localhost:5173
- Uses a Vite dev-server proxy for backend API access

### Backend
- Node.js + Express
- Stateless API design
- JWT-based authentication

Reasons:
- Same language across stack
- Simple and flexible
- Non-blocking I/O suits chat-style workloads

NestJS was considered but deferred to reduce MVP complexity.

### Database
- PostgreSQL
- All schema definitions and changes are managed in code using migrations
- Tables are not manually created in pgAdmin in the long term
- Migrations are the source of truth for schema state

Reasons:
- Strong relational modeling
- Clear hierarchy enforcement
- Proven scalability
- Supports JSON fields if needed

### Mobile Strategy
- PWA-first
- Wrapped using Capacitor for iOS and Android

Reasons:
- Single codebase
- Near-native experience
- App store distribution without native rewrite

## 10. Scalability Assumptions and Validation

Target scale discussed:
- ~3,000 organizations
- ~3 million tasks
- ~60 million task messages

### Validation
This scale is well within limits for:
- Postgres with indexing and pagination
- Node.js with stateless services
- React with virtualized lists

### Required Practices
- Mandatory pagination
- Indexed foreign keys
- Lazy loading messages
- Optional partitioning for large tables
- Stateless backend services

No architectural rewrites are required to reach this scale.

## 11. Local Development Environment

### Tools Installed
- Node.js (LTS)
- npm
- Git
- PostgreSQL (local or Docker)
- VS Code

### Project Structure
```
ops-mvp/
├─ backend/
├─ frontend/
└─ README.md
```

### Frontend Setup
- Vite + React + TypeScript

### Backend Setup
- Express server scaffolded
- Environment variables via .env
- Postgres database created locally
- Database schema managed via node-pg-migrate
- Database can be wiped and recreated via migration reset during development

## 12. AI-Assisted Development Strategy

AI is used as:
- A senior pair programmer
- A boilerplate generator
- A refactoring assistant

### Guidelines
- Small, scoped prompts
- No monolithic generation requests
- Focus on components, APIs, schemas, and fixes

### Example Implemented Prompt
A detailed Copilot prompt was created to generate the Organization Selection Page, defining:
- UI states
- Local state management
- Placeholder async functions
- No routing
- No backend coupling

## 13. Current Execution State

### Completed
- Product scope defined
- Architecture validated
- Scalability confirmed
- Local dev environment running
- Frontend scaffolded with Vite
- Login page implemented
- Org selection page exists and is partially implemented
- Backend database connectivity established
- Migrations configured

### Next Logical Steps
- Finish Org Selection Page logic (create org, show invites)
- Ensure auth persistence across refresh
- Finalize org and invite backend APIs
- Wire frontend to backend via Vite proxy
- Implement unified dashboard page with column-based layout

## 13. Usage Instruction for Future Conversations

This document should be treated as authoritative context. All recommendations, code, and decisions should align with what is defined here unless explicitly overridden.

---

## Builder’s Notes (Working Index)

- Source: User-provided, authoritative quicky context. Keep this file up to date with any explicit changes made in future sessions.
- Working anchors:
  - Data model: Section 3
  - Auth + OTP: Section 4
  - Invite system: Section 5
  - MVP scope: Section 6
  - Dashboard UX: Section 7
  - Tech stack: Section 9
  - Dev setup: Section 11
  - Execution state + next steps: Section 13
- Implementation priority (initial):
  1) Org Selection logic + invites
  2) Auth persistence
  3) Org/invite APIs + proxy
  4) Dashboard columns layout
